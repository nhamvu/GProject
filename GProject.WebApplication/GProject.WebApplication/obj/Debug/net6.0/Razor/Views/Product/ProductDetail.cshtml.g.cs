#pragma checksum "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Product_ProductDetail), @"mvc.1.0.view", @"/Views/Product/ProductDetail.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\_ViewImports.cshtml"
using GProject.WebApplication;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\_ViewImports.cshtml"
using X.PagedList.Mvc.Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
using GProject.WebApplication.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
using GProject.Api.MyServices.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
using GProject.Data.DomainClass;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
using GProject.WebApplication.Helpers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
using GProject.Data.MyRepositories.IRepositories;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a", @"/Views/Product/ProductDetail.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1fbcf431fddd7af05102fdaaa3deed8323ce67f6", @"/Views/_ViewImports.cshtml")]
    public class Views_Product_ProductDetail : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<Tuple<GProject.Data.DomainClass.Product, List<GProject.Data.DomainClass.ProductVariation>,
GProject.Data.DomainClass.Brand, EvaluateCommentDTO, decimal, int, Customer>>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("imgProd"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("width:650px;height:500px;"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("alt", new global::Microsoft.AspNetCore.Html.HtmlString(""), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("width:130px; height:160px;"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("img-thumbnail"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("formdata"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("form-horizontal d-block"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_7 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("image__img"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_8 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("alt", new global::Microsoft.AspNetCore.Html.HtmlString("Bricks"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_9 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/images/avatar.jpg"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_10 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("border-radius:50%; width:35px; border:2px solid black;"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_11 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("commentBox"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_12 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("name", "_CommentBox", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_13 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("value", "", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_14 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-controller", "Order", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_15 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "BuyNow", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_16 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 9 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
  
    ViewBag.Title = "Danh sách sản phẩm";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var ratingSum = Model.Item5;
    var ratingCount = Model.Item6;
    decimal rating = 0;
    if (ratingCount > 0)
    {
        rating = (ratingSum / ratingCount);
    }
    var totalRating = decimal.Parse(rating.ToString());

    var lstColor = await Commons.GetAll<Color>(String.Concat(Commons.mylocalhost, "Color/get-all-Color"));
    var lstSize = await Commons.GetAll<Size>(String.Concat(Commons.mylocalhost, "Size/get-all-Size"));
    var lstCustomer = await Commons.GetAll<Customer>(String.Concat(Commons.mylocalhost, "Customer/get-all-Customer"));
    var lstOrder = await Commons.GetAll<Order>(String.Concat(Commons.mylocalhost, "Order/get-all-Order"));
    var lstOrderDetail = await Commons.GetAll<OrderDetail>(String.Concat(Commons.mylocalhost,
    "Order/get-all-Order-detail"));
    var lstProducts = await Commons.GetAll<Product>(String.Concat(Commons.mylocalhost, "ProductMGR/get-all-Product-mgr"));
    var lstProductvariation = await Commons.GetAll<ProductVariation>(String.Concat(Commons.mylocalhost,
    "ProductVariation/get-all-ProductVariation"));

    var lstEvaluates = await Commons.GetAll<Evaluate>(String.Concat(Commons.mylocalhost, "Evaluate/get-all-Evaluate"));

    var isOrder = lstOrder
                .Join(lstOrderDetail, a => a.Id, b => b.OrderId, (a, b) => new { A = a, B = b })
                .Join(Model.Item2, ab => ab.B.ProductVariationId, c => c.Id, (ab, c) => new { A = ab.A, B = ab.B, C = c })
                .Where(k => k.C.ProductId == Model.Item1.Id && k.A.CustomerId == Model.Item7.Id).Select(c => c.A.CustomerId).FirstOrDefault();

    var isComment = lstEvaluates.FirstOrDefault(c => c.ProductId == Model.Item1.Id && c.CustomerId == Model.Item7.Id);
    IPromotionRepository _IPromotionRepository = new PromotionRepository();
    IPromotionDetailRepository _IPromotionDetalRepository = new PromotionDetailRepository();

    var promotiondata = (from p in _IPromotionRepository.GetAll()
                         join q in _IPromotionDetalRepository.GetAll() on p.Id equals q.PromotionId
                         where p.Status == GProject.Data.Enums.PromotionStatus.Happenning
                         select new
                         {
                             Promotion = p,
                             PromotionDetail = q
                         }).ToList();

    decimal price = Model.Item1.Price;
    var existProdPromotion = promotiondata.Where(c => c.PromotionDetail.ProductId == Model.Item1.Id).FirstOrDefault();
    if (existProdPromotion!= null)
    {
        price = existProdPromotion.PromotionDetail.CurrentPrice;
    }

    var user = GProject.WebApplication.Helpers.Commons.GetObjectFromJson<GProject.Data.DomainClass.Customer>(Context.Session, "userLogin");

    string nameByNow;
    int checkByNow = 0;
    if(user == null)
        nameByNow = "buyFormDataNotLogin";
    else
    {
        nameByNow = "buyFormData";
        checkByNow = 1;
    }


#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n\r\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/UserContent/styles/categories_styles.css\">\r\n<link href=\"/css/product_details.css\" rel=\"stylesheet\">\r\n<link href=\"/AdminContent/css/style.min.css\" rel=\"stylesheet\">\r\n\r\n<div style=\"margin-top: 200px;\">\r\n");
#nullable restore
#line 80 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
 if (@ViewData["Mess"] != null)
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <p style=\"visibility: hidden;\" id=\"error\">");
#nullable restore
#line 82 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                         Write(ViewData["Mess"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 83 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
}

#line default
#line hidden
#nullable disable
#nullable restore
#line 84 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
 if (@ViewData["message"] != null)
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <p style=\"visibility: hidden;\" id=\"messerror\">");
#nullable restore
#line 86 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                             Write(ViewData["message"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 87 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
}

#line default
#line hidden
#nullable disable
#nullable restore
#line 88 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
 if (Model != null)
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div id=\"motor-detail\" class=\"container\">\r\n        <div class=\"row overview\">\r\n            <div class=\"col-12 col-lg-7 overview-left container-fliud\">\r\n                <div class=\"characteristics-image text-center\">\r\n");
#nullable restore
#line 94 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                      
                        string img = Model.Item2.Where(c => c.ProductId == Model.Item1.Id).Select(c =>
                        c.Image).FirstOrDefault();
                    

#line default
#line hidden
#nullable disable
            WriteLiteral("                    ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a17301", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "src", 2, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 4531, "~/images/", 4531, 9, true);
#nullable restore
#line 98 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
AddHtmlAttributeValue("", 4540, img, 4540, 4, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n                </div>\r\n                <div class=\"row\">\r\n                    <fieldset>\r\n                       \r\n                        <hr>\r\n");
#nullable restore
#line 104 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                          
                            foreach (var item in Model.Item2.Select(c => c.ColorId).Distinct().ToList())
                            {
                                string im = Model.Item2.Where(c => c.ColorId == item && c.ProductId == Model.Item1.Id).Select(c =>
                                c.Image).FirstOrDefault().NullToString();

#line default
#line hidden
#nullable disable
            WriteLiteral("                                <button type=\"button\"");
            BeginWriteAttribute("onclick", " onclick=\"", 5126, "\"", 5158, 3);
            WriteAttributeValue("", 5136, "changeImageProd(\'", 5136, 17, true);
#nullable restore
#line 109 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 5153, im, 5153, 3, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 5156, "\')", 5156, 2, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                                    ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a20503", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "src", 2, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 5295, "~/images/", 5295, 9, true);
#nullable restore
#line 111 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
AddHtmlAttributeValue("", 5304, im, 5304, 3, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n                                </button>\r\n");
#nullable restore
#line 113 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                            }
                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                    </fieldset>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12 col-lg-5 overview-right\">\r\n                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a22783", async() => {
                WriteLiteral(@"
                    <input id=""cTotalMoney"" name=""cTotalMoney"" hidden=""hidden"" />
                    <input id=""cColor"" name=""cColor"" hidden=""hidden"" />
                    <input id=""cSize"" name=""cSize"" hidden=""hidden"" />
                    <input id=""cQuantity"" name=""cQuantity"" hidden=""hidden"" />
                    <input id=""cPrice"" name=""cPrice"" hidden=""hidden"" />
                    <input id=""cProductId"" name=""cProductId""");
                BeginWriteAttribute("value", " value=\"", 6063, "\"", 6097, 1);
#nullable restore
#line 125 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 6071, Model.Item1.Id.ToString(), 6071, 26, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" hidden=\"hidden\" />\r\n\r\n                    <h2 class=\"d-none d-lg-block\" style=\"color:Black\">");
#nullable restore
#line 127 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                 Write(Model.Item1.Name);

#line default
#line hidden
#nullable disable
                WriteLiteral("</h2>\r\n                    \r\n                    <div class=\"row\">\r\n                        <h3 class=\"d-none d-lg-block\" style=\"color:Red\">\r\n                        Giá hiện tại: ");
#nullable restore
#line 131 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                 Write(string.Format("{0:0,0}", price));

#line default
#line hidden
#nullable disable
                WriteLiteral(" đ  \r\n");
#nullable restore
#line 132 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                         if (existProdPromotion != null)
                        {

#line default
#line hidden
#nullable disable
                WriteLiteral("                            <del style=\"    color: gray; font-size: 18px;\">");
#nullable restore
#line 134 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                      Write(string.Format("{0:0,0}", existProdPromotion.PromotionDetail.InitialPrice));

#line default
#line hidden
#nullable disable
                WriteLiteral(" đ </del>\r\n");
#nullable restore
#line 135 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                        }                       

#line default
#line hidden
#nullable disable
                WriteLiteral(@"                        </h3>
                        
                    </div>
                    <div class=""overview-detail mb-3"" style=""min-height: 0"">
                        <div class=""characteristics-desc"">
                            <h4>Nhãn hiệu: ");
#nullable restore
#line 141 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                      Write(Model.Item3.Name);

#line default
#line hidden
#nullable disable
                WriteLiteral("</h4>\r\n");
#nullable restore
#line 142 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                              
                                string productType = "";
                                foreach (var item in Model.Item1.ProductType.Split(',').Distinct().ToList())
                                {
                                    switch (item)
                                    {
                                        case "0":
                                            productType += "Sản phẩm bình thường";
                                            break;
                                        case "1":
                                            productType += "Sản phẩm mới";
                                            break;
                                        case "2":
                                            productType += "Sản phẩm nổi bật";
                                            break;
                                        case "3":
                                            productType += "Sản phẩm được yêu thích";
                                            break;
                                        case "4":
                                            productType += "Sản phẩm khuyến mại";
                                            break;
                                        default:
                                            break;
                                    }
                                }
                            

#line default
#line hidden
#nullable disable
                WriteLiteral("                            <h4>Loại sản phẩm: ");
#nullable restore
#line 168 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                          Write(productType);

#line default
#line hidden
#nullable disable
                WriteLiteral("</h4>\r\n                            <h4>Lượt xem: ");
#nullable restore
#line 169 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                     Write(Model.Item1.ViewCount);

#line default
#line hidden
#nullable disable
                WriteLiteral(" <i class=\"fa fa-eye\"></i></h4>\r\n                            \r\n                            <h4>Số lượng còn lại: \r\n                                <span id=\"mQuantityInstock\"");
                BeginWriteAttribute("value", " value=\"", 8772, "\"", 8780, 0);
                EndWriteAttribute();
                WriteLiteral(">");
#nullable restore
#line 172 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                Write(Model.Item2.Sum(c => c.QuantityInStock));

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n\r\n                                </span>\r\n                            </h4>\r\n                            <h4 class=\"cl-class\">\r\n                                Màu sắc:\r\n");
#nullable restore
#line 178 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                  
                                    foreach (var item in Model.Item2.Select(c => c.ColorId).Distinct().ToList())
                                    {
                                        string im = Model.Item2.Where(c => c.ColorId == item && c.ProductId == Model.Item1.Id).Select(c => c.Image).FirstOrDefault().NullToString();

#line default
#line hidden
#nullable disable
                WriteLiteral("                                        <button type=\"button\"");
                BeginWriteAttribute("value", " value=\"", 9427, "\"", 9440, 1);
#nullable restore
#line 182 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 9435, item, 9435, 5, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" id=\"btnColor\"");
                BeginWriteAttribute("onclick", " onclick=\"", 9455, "\"", 9487, 3);
                WriteAttributeValue("", 9465, "changeImageProd(\'", 9465, 17, true);
#nullable restore
#line 182 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 9482, im, 9482, 3, false);

#line default
#line hidden
#nullable disable
                WriteAttributeValue("", 9485, "\')", 9485, 2, true);
                EndWriteAttribute();
                WriteLiteral(" style=\"padding: 0 5px 0 5px;\"");
                BeginWriteAttribute("href", " href=\"", 9518, "\"", 9561, 4);
                WriteAttributeValue("", 9525, "/productdetail/", 9525, 15, true);
#nullable restore
#line 182 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 9540, item, 9540, 5, false);

#line default
#line hidden
#nullable disable
                WriteAttributeValue("", 9545, "/", 9545, 1, true);
#nullable restore
#line 182 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 9546, Model.Item1.Id, 9546, 15, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(">\r\n                                            ");
#nullable restore
#line 183 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                        Write(lstColor.FirstOrDefault(c => c.Id == item).Name.NullToString());

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                                        </button>\r\n");
#nullable restore
#line 185 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                    }
                                

#line default
#line hidden
#nullable disable
                WriteLiteral("                            </h4>\r\n                            <h4 class=\"si-class\">\r\n                                Size:\r\n");
#nullable restore
#line 190 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                  

                                    foreach (var item in Model.Item2.Select(c => c.SizeId).Distinct().ToList())
                                    {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                        <button type=\"button\"");
                BeginWriteAttribute("value", " value=\"", 10177, "\"", 10190, 1);
#nullable restore
#line 194 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 10185, item, 10185, 5, false);

#line default
#line hidden
#nullable disable
                EndWriteAttribute();
                WriteLiteral(" id=\"btnSize\" style=\"padding: 0 9px 0 9px;\" >\r\n                                            ");
#nullable restore
#line 195 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                        Write(lstSize.FirstOrDefault(c => c.Id == item).Code.NullToString());

#line default
#line hidden
#nullable disable
                WriteLiteral("\r\n                                        </button>\r\n");
#nullable restore
#line 197 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                    }
                                

#line default
#line hidden
#nullable disable
                WriteLiteral(@"                            </h4>

                            <div class=""input-group plus-minus-input row"">
                                <h4 class=""col-md-4"">Số lượng:</h4>
                                <div class=""col-md-8 justify-content-center"">
                                    <div class=""row"">
                                        <div class=""input-group-button col-md-3 mt-2"">
                                            <button type=""button"" class=""btn-warning hollow circle"" data-quantity=""minus""
                                                data-field=""quantity"" style=""margin-right:5px;"">
                                                <i class=""fa fa-minus"" aria-hidden=""true""></i>
                                            </button>
                                        </div>
                                        <input class=""input-group-field form-control col-md-5 quantity"" type=""number"" id=""quantity""
                                            name=""quantity"" value=""");
                WriteLiteral(@"0"" style=""width:100px;"">
                                        <div class=""input-group-button col-md-3 mt-2"">
                                            <button type=""button"" class=""btn-info hollow circle"" data-quantity=""plus""
                                                data-field=""quantity"" style=""margin-left:5px;"">
                                                <i class=""fa fa-plus"" aria-hidden=""true""></i>
                                            </button>
                                        </div>
                                    </div>

                                </div>

                            </div>
                            <hr>
                            <div class=""row"">
                                <h3 class=""col-4"">Thành tiền:</h3>
                                <h3 class=""col-8"" style=""color:red;"" id=""totalMoney"" name=""totalMoney""> 0 đ</h3>
                            </div>
                            <div class=""form-group"">
                   ");
                WriteLiteral(@"             <label class=""control-label col-sm-3"">Mô tả của bạn:</label>
                                <div class=""col-sm-12"">
                                    <textarea class=""form-control"" name=""cDescription"" id=""cDescription"" cols=""50"" rows=""5""
                                        style=""border:double 4px orange;""></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class=""row"">
                        <button type=""button"" id=""btnAction"" onclick=""AddToCart()"" class=""btn btn-outline-danger col-md-5""><i
                                class=""fa fa-shopping-cart"" style=""margin-right:10px; font-size: 17px;""></i>Thêm vào giỏ hàng</button>
                        <button type=""button"" id=""btnAction"" onclick=""BuyNow()"" class=""btn btn-outline-danger col-md-5""><i
                                class=""fa fa-calendar-o"" style=""margin-right:10px; font-size: 17px;""></i>Mua ngay</but");
                WriteLiteral("ton>\r\n                    </div>\r\n\r\n                ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_5);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <p>");
#nullable restore
#line 250 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
      Write(Model.Item1.Description.NullToString());

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n        <!-- Danh sách sản phẩm liên quan-->\r\n        <div>\r\n");
#nullable restore
#line 253 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
              
                var lstSimilarProduct = lstProducts.Where(c => c.ProductType.Contains(Model.Item1.ProductType) && c.Id !=
                Model.Item1.Id).ToList();
            

#line default
#line hidden
#nullable disable
#nullable restore
#line 257 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
             if (lstSimilarProduct.Count() > 0)
            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                <hr>\r\n                <div class=\"p-1 text-center\" >\r\n                    <h2 >Sản phẩm liên quan</h2>\r\n                </div>\r\n                <div class=\"product-grid\" style=\"height:450px;\">\r\n");
#nullable restore
#line 264 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                     foreach (var x in lstSimilarProduct)
                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <div class=\"product-item men\">\r\n                            <div class=\"product discount product_filter\">\r\n                                <div class=\"image\">\r\n\r\n");
#nullable restore
#line 270 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                      
                                        string image = lstProductvariation.Where(c => c.ProductId == x.Id &&
                                        !string.IsNullOrEmpty(c.Image)).Select(c => c.Image).FirstOrDefault().NullToString();
                                    

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a42204", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_7);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "src", 2, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 14895, "~/images/", 14895, 9, true);
#nullable restore
#line 274 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
AddHtmlAttributeValue("", 14904, image, 14904, 6, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_8);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n                                    <div class=\"image__overlay image__overlay--primary\">\r\n                                        <p class=\"image__description\">Mua ngay</p>\r\n                                        <a class=\"btn btn-primary\"");
            BeginWriteAttribute("href", " href=\"", 15167, "\"", 15194, 2);
            WriteAttributeValue("", 15174, "/productdetail/", 15174, 15, true);
#nullable restore
#line 277 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
WriteAttributeValue("", 15189, x.Id, 15189, 5, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" style=""border-radius:10px;""><i
                                                class=""fa fa-shopping-cart"" style=""margin-right:10px;""></i>Thêm vào giỏ hàng</a>
                                    </div>
                                </div>
                                <div class=""card-body"">
                                    <h4 class=""card-title text-center"" style=""color:red;"">
                                         ");
#nullable restore
#line 283 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                    Write(string.Format("{0:0,0} VNĐ",Convert.ToDouble(x.Price.ToString())));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                                    </h4>\r\n                                    <div>\r\n                                        <h4 class=\"card-title text-center\">");
#nullable restore
#line 286 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                      Write(x.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h4>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n");
#nullable restore
#line 291 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral("                </div>\r\n");
#nullable restore
#line 293 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
            }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"        </div>
        <!-- Bình luận, đánh giá-->
        <div class=""p-1 text-left"" style=""background-color: #CCCCCC; margin-top: 30px;"">
            <h4><i class=""fa fa-comments"" style=""margin:5px 10px;""></i>Đánh giá sản phẩm</h4>
            <h6><i class=""fa fa-comments"" style=""margin:5px 10px;""></i>Có ");
#nullable restore
#line 298 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                     Write(lstEvaluates.Where(c => c.ProductId == Model.Item1.Id).Count());

#line default
#line hidden
#nullable disable
            WriteLiteral(@" lượt đánh giá</h6>
        </div>
        <div>
            <span class=""starFadeN"" id=""sRate1""></span>
            <span class=""starFadeN"" id=""sRate2""></span>
            <span class=""starFadeN"" id=""sRate3""></span>
            <span class=""starFadeN"" id=""sRate4""></span>
            <span class=""starFadeN"" id=""sRate5""></span>
        </div>
");
#nullable restore
#line 307 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
         if (Model.Item4.Evaluates.Count() > 0)
        {
            

#line default
#line hidden
#nullable disable
#nullable restore
#line 309 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
             foreach (var item in Model.Item4.Evaluates)
            {
                var cusInfo = lstCustomer.Where(c => c.Id == item.CustomerId).FirstOrDefault();

#line default
#line hidden
#nullable disable
            WriteLiteral("                <hr />\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-1 d-flex justify-content-between\">\r\n");
#nullable restore
#line 315 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                          
                            string imgCusAvata = cusInfo.Image.NullToString();
                            if (string.IsNullOrEmpty(imgCusAvata))
                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a49082", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_9);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_10);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 320 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                            }
                            else
                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagOnly, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a50570", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "src", 2, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            AddHtmlAttributeValue("", 17654, "~/images/", 17654, 9, true);
#nullable restore
#line 323 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
AddHtmlAttributeValue("", 17663, imgCusAvata, 17663, 12, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_10);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 324 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                            }
                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                    </div>\r\n                    <div class=\"col-md-11\">\r\n                        <i style=\"margin-right: 30px; vertical-align: top;\">");
#nullable restore
#line 328 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                       Write(cusInfo.Name.NullToString());

#line default
#line hidden
#nullable disable
            WriteLiteral("</i>\r\n                        <i style=\"margin-right: 30px; vertical-align: top;\">");
#nullable restore
#line 329 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                                                       Write(item.CreateDate);

#line default
#line hidden
#nullable disable
            WriteLiteral("</i>\r\n");
#nullable restore
#line 330 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                         for (int i = 0; i < item.Rating; i++)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <span class=\"starGlowN\"></span>\r\n");
#nullable restore
#line 333 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 334 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                         for (int i = item.Rating.NullToInt(); i < 5; i++)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                            <span class=\"starFadeN\"></span>\r\n");
#nullable restore
#line 337 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                        }

#line default
#line hidden
#nullable disable
            WriteLiteral("                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-1\"></div>\r\n                    <div class=\"col-md-11\">\r\n                        ");
#nullable restore
#line 343 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                   Write(Html.Raw(item.Comment.Replace("\n", "<br />")));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n                    </div>\r\n                </div>\r\n");
#nullable restore
#line 346 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 346 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
             
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("        <hr />\r\n");
#nullable restore
#line 349 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
         if (isOrder != null && isComment == null)
        {

#line default
#line hidden
#nullable disable
            WriteLiteral("            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("partial", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a56195", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.PartialTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_11);
            __Microsoft_AspNetCore_Mvc_TagHelpers_PartialTagHelper.Name = (string)__tagHelperAttribute_12.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_12);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
#nullable restore
#line 352 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n    </div>\r\n");
#nullable restore
#line 355 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
}

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"modal\" id=\"OrderModal\" role=\"dialog\">\r\n    <div class=\"modal-dialog modal-md\" style=\"text-align:left; background-color:white; max-width:900px\">\r\n        <div style=\"width:900px;\">\r\n            ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a58145", async() => {
                WriteLiteral(@"
                <div class=""modal-content justify-content-center"" style=""border-width:1px;"">
                    <div class=""modal-header"" style=""width:800px;"">
                        <h4 class=""modal-title text-center"">Thông tin đơn hàng</h4>
                    </div>
                    <div class=""modal-body"">
                        <input type=""text"" id=""pTotalMoney"" name=""pTotalMoney"" hidden=""hidden"" />
                        <input type=""text"" id=""cShippingFee"" name=""cShippingFee"" hidden=""hidden"" />
                        <input type=""text"" id=""idDeliveryAddress"" name=""idDeliveryAddress""");
                BeginWriteAttribute("value", " value=\"", 19922, "\"", 19930, 0);
                EndWriteAttribute();
                WriteLiteral(" hidden=\"hidden\" />\r\n                        <input type=\"text\" id=\"cGiamGia\" name=\"cGiamGia\"");
                BeginWriteAttribute("value", " value=\"", 20024, "\"", 20032, 0);
                EndWriteAttribute();
                WriteLiteral(" hidden=\"hidden\" />\r\n\r\n");
#nullable restore
#line 372 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                          
                            if(user != null)
                            {

#line default
#line hidden
#nullable disable
                WriteLiteral(@"                                <div class=""row"">
                                    <div class=""col-md-12"">
                                        <div class=""form-group"">
                                            <label class=""control-label col-sm-5"">Địa chỉ đặt hàng:<span
                                                style=""color: red"">(*)</span></label>
                                            <div class=""col-sm-12"">
                                                <select id=""selectDeliveryAddress"" class=""form-select"">
                                                </select>
                                                <button style=""margin-top: 5px;"" class=""btn btn-success ""
                                                    onclick=""OpenDeliveryAddress(); return false;"" data-toggle=""ajax-modal""
                                                    data-target=""#showDataDeliveryAddress"" data-url=""/DeliveryAddress/Index"">
                                                    Thêm
   ");
                WriteLiteral("                                             </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n");
#nullable restore
#line 392 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                            }
                            else
                            {

#line default
#line hidden
#nullable disable
                WriteLiteral("                                <input type=\"text\" id=\"Province\" name=\"Province\"");
                BeginWriteAttribute("value", " value=\"", 21601, "\"", 21609, 0);
                EndWriteAttribute();
                WriteLiteral(" hidden=\"hidden\" />\r\n                                <input type=\"text\" id=\"District\" name=\"District\"");
                BeginWriteAttribute("value", " value=\"", 21711, "\"", 21719, 0);
                EndWriteAttribute();
                WriteLiteral(" hidden=\"hidden\" />\r\n                                <input type=\"text\" id=\"Wards\" name=\"Wards\"");
                BeginWriteAttribute("value", " value=\"", 21815, "\"", 21823, 0);
                EndWriteAttribute();
                WriteLiteral(@" hidden=""hidden"" />
                            <div class=""row""> 
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Họ và tên:<span style=""color: red"">(*)</span></label>
                                    <div class=""col-sm-12"">
                                        <input type=""text"" id=""ShippingFullName"" name=""ShippingFullName""");
                BeginWriteAttribute("value", " value=\"", 22297, "\"", 22305, 0);
                EndWriteAttribute();
                BeginWriteAttribute("placeholder", " placeholder=\"", 22306, "\"", 22320, 0);
                EndWriteAttribute();
                WriteLiteral(@" class=""form-control"" />
                                    </div>
                                </div>
                            </div>
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Số điện thoại:<span style=""color: red"">(*)</span></label>
                                    <div class=""col-sm-12"">
                                        <input type=""text"" id=""ShippingPhone"" name=""ShippingPhone""");
                BeginWriteAttribute("value", " value=\"", 22869, "\"", 22877, 0);
                EndWriteAttribute();
                WriteLiteral(" placeholder=\"+84\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            </div>\r\n");
                WriteLiteral(@"                            <div class=""row""> 
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Tỉnh/Thành phố:</label>
                                    <div class=""col-sm-12"">
                                        <select id=""selectProvince"" class=""form-select"">
                                            ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a64520", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral(@"
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Quận/Huyện:</label>
                                    <div class=""col-sm-12"">
                                        <select id=""selectDistrict"" class=""form-select"">
                                        </select>
                                    </div>
                                </div>
                            </div>
                            </div>
");
                WriteLiteral(@"                            <div class=""row""> 
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Phường/Xã:</label>
                                    <div class=""col-sm-12"">
                                        <select id=""selectWards"" class=""form-select"">
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Địa chỉ chi tiết:<span style=""color: red"">(*)</span></label>
                                    <div class=""col-sm-12"">
                                        <input type=""text"" id=""ShippingAddress"" name=""ShippingAddress""");
                BeginWriteAttribute("value", " value=\"", 25295, "\"", 25303, 0);
                EndWriteAttribute();
                WriteLiteral(" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            </div>                           \r\n");
#nullable restore
#line 458 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                            }
                        

#line default
#line hidden
#nullable disable
                WriteLiteral(@"                        <div class=""row"">
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Email:<span
                                                style=""color: red"">(*)</span></label>
                                    <div class=""col-sm-12"">
                                        <input type=""email"" id=""ShippingEmail"" name=""ShippingEmail""");
                BeginWriteAttribute("value", " value=\"", 26058, "\"", 26066, 0);
                EndWriteAttribute();
                BeginWriteAttribute("placeholder", "\r\n                                            placeholder=\"", 26067, "\"", 26126, 0);
                EndWriteAttribute();
                WriteLiteral(@" class=""form-control"" />
                                    </div>
                                </div>
                            </div>
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-12"">Hình thức thanh toán:<span
                                                style=""color: red"">(*)</span></label>
                                    <div class=""col-sm-12"">
");
#nullable restore
#line 476 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                          
                                            int PaymentType = 0;
                                        

#line default
#line hidden
#nullable disable
                WriteLiteral("                                        ");
#nullable restore
#line 479 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                                   Write(Html.DropDownList("PaymentType",new[]
                                        {
                                        new SelectListItem{Text="Thanh toán khi nhận hàng", Value="0", Selected=
                                        (PaymentType== 0)},
                                        new SelectListItem{Text="Thanh toán khi đặt hàng", Value="1", Selected=
                                        (PaymentType== 1)},
                                        }, new { @name = "PaymentType",  @id = "PaymentType", @class="searchText form-control select"}));

#line default
#line hidden
#nullable disable
                WriteLiteral(@"
                                    </div>
                                </div>
                            </div>
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-6"">Mã giảm giá:<span
                                                style=""color: red"">(*)</span></label>
                                    <div class=""col-sm-12"">
                                        <select id=""selectVoucher"" name=""selectVoucher"" class=""form-select"">
                                            ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "0aefa690c8ebed8bb5e2f36df84c3b88dba0b19a71268", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper.Value = (string)__tagHelperAttribute_13.Value;
                __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_13);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral(@"
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class=""col-md-6"">
                                <div class=""form-group"">
                                    <label class=""control-label col-sm-5"">Nhập mã giảm giá:<span
                                                style=""color: red"">(*)</span></label>
                                    <div class=""row col-md-12"">
                                        <div class=""col-sm-8"">
                                            <input type=""text"" id=""DiscountCode"" name=""DiscountCode""");
                BeginWriteAttribute("value", " value=\"", 28744, "\"", 28752, 0);
                EndWriteAttribute();
                BeginWriteAttribute("placeholder", "\r\n                                                placeholder=\"", 28753, "\"", 28816, 0);
                EndWriteAttribute();
                WriteLiteral(@" class=""form-control col-12"" />
                                        </div>
                                        <div class=""col-sm-4"">
                                            <a class=""btn btn-outline-info"" onclick=""CheckDiscountCode()""><i
                                                    class=""fa-solid fa-check fa-lg""></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class=""form-group"">
                                <label class=""control-label col-sm-3"">Mô tả của bạn:</label>
                                <div class=""col-sm-12"">
                                    <textarea class=""form-control"" name=""cDescription"" id=""cDescription"" cols=""50""
                                        rows=""5"" style=""border:double 4px orange;""></textarea>
                                </div>
                            </div>
              ");
                WriteLiteral(@"              <div class=""form-group row"">
                                <div class=""col-sm-9"">
                                    <label class=""control-label col-md-12"">Phí ship:</label>
                                </div>
                                <div class=""col-sm-3"">
                                    <p><label id=""txtPhiShip"">0</label><label style=""margin-left: 5px;"">đ</label>
                                    </p>
                                </div>
                            </div>
                            <div class=""form-group row"" style=""margin-top: -20px"">
                                <div class=""col-sm-9"">
                                    <label class=""control-label col-md-12"">Giảm giá:</label>
                                </div>
                                <div class=""col-sm-3"">
                                    <p><label>- </label> <label id=""txtGiamGia"">0</label><label
                                            style=""margin-left: 5px;"">đ</l");
                WriteLiteral(@"abel></p>
                                </div>
                            </div>
                            <div class=""form-group row"" style=""margin-top: -20px"">
                                <div class=""col-sm-9"">
                                    <label class=""control-label col-md-12"">Tổng tiền sản phẩm:</label>
                                </div>
                                <div class=""col-sm-3"">
                                    <p><label id=""txtTotalProduct""></label>
                                    <label style=""margin-left: 5px;"">đ</label></p>
                                </div>
                            </div>
                            <div class=""form-group row"" style=""margin-top: -20px"">
                                <div class=""col-sm-9"">
                                    <h5><label class=""control-label col-md-12"">
                                        Tổng tiền thanhtoán:
                                    </label></h5>
                          ");
                WriteLiteral(@"      </div>
                                <div class=""col-sm-3"">
                                    <h5><label style=""color:red;"" id=""textTotalMoney""></label><label
                                            style=""margin-left: 5px;color:red;"">đ</label></h5>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class=""modal-footer"" style=""margin-top: -20px"">
                        <button type=""submit"" class=""btn btn-sm btn-success"" id=""cpCopyBtn""><i class=""fa fa-check""
                                aria-hidden=""true""></i> Đặt hàng</button>
                        <button type=""button"" class=""btn btn-sm btn-default btn-dimiss-modal"" id=""btnCloseModal"">
                            <i class=""fa fa-times""></i> Đóng
                        </button>
                    </div>
                </div>

            ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "id", 1, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
#nullable restore
#line 360 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
AddHtmlAttributeValue("", 19168, nameByNow, 19168, 10, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            BeginAddHtmlAttributeValues(__tagHelperExecutionContext, "order_id", 1, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
#nullable restore
#line 360 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
AddHtmlAttributeValue("", 19190, nameByNow, 19190, 10, false);

#line default
#line hidden
#nullable disable
            EndAddHtmlAttributeValues(__tagHelperExecutionContext);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Controller = (string)__tagHelperAttribute_14.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_14);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Action = (string)__tagHelperAttribute_15.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_15);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_16.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_16);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
        </div>
    </div>
</div>

<script type=""text/javascript"">
    $(document).ready(function () {

        LoadProvince();
        LoadDistrict();
        var id = $(this).attr(""order_id"")
            if (id == ""buyFormData"") {
                DataAddressCustomer();
            }
        LoadWard();
        

        document.querySelector('#");
#nullable restore
#line 589 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                            Write(nameByNow);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"').addEventListener('submit', function (e) {
            var form = this;
            e.preventDefault();
            var id = $(this).attr(""order_id"")
            if(id == ""buyFormData"")
            {
                if ($('#selectDeliveryAddress').val() == '') {
                    sweetAlert(""Thông báo"", ""Thông tin địa chỉ không được để trống"", ""error"");
                }
                else{
                    swal(""Bạn chắc chắn muốn đặt đơn hàng này?"", {
                    title: 'Bạn chắc chắn muốn đặt đơn hàng này?',
                    icon: 'info',
                    buttons: [""Không, tôi cần xem lại"", ""Có, tôi đồng ý""],
                }).then(function (isConfirm) {
                    if (isConfirm) {
                        form.submit();
                    } else {
                        swal(""Đã hủy"", ""Bạn đã không lưu những thay đổi này!"", ""error"");
                    }
                });
                }
            }
            else if(id == ""buyFormDataNotLo");
            WriteLiteral(@"gin""){

                $('#Province').val( $(""#selectProvince :selected"").text() );
                $('#District').val( $(""#selectDistrict :selected"").text() );
                $('#Wards').val( $(""#selectWards :selected"").text() );

                if(checkOrderData())
                {
                    swal(""Bạn chắc chắn muốn đặt đơn hàng này?"", {
                    title: 'Bạn chắc chắn muốn đặt đơn hàng này?',
                    icon: 'info',
                    buttons: [""Không, tôi cần xem lại"", ""Có, tôi đồng ý""],
                }).then(function (isConfirm) {
                    if (isConfirm) {
                        form.submit();
                    } else {
                        swal(""Đã hủy"", ""Bạn đã không lưu những thay đổi này!"", ""error"");
                    }
                });
                }
                
            }            
            
        });


        $(""#selectDeliveryAddress"").change(function () {
            let _id = $(""#selectDeliv");
            WriteLiteral(@"eryAddress"").val();
            $.ajax({
                url: ""/Product/GetDataDeliveryAddress?id="" + _id,
                type: ""GET"",
                success: function (result) {
                    if (result != null) {
                        ShippingFee(result.districtID, result.wardCode)
                        $(""#idDeliveryAddress"").val(result.id)
                    }
                    else {
                        var total = parseFloat(document.querySelector('#txtTotalProduct').innerText.replace(/,/g, '')) - parseFloat(document.querySelector('#txtGiamGia').innerText.replace(/,/g, ''))
                        if (total < 0) {
                            total = 0;
                        }
                        swal(""Thông báo!"", ""Bạn không được để trống thông tin địa chỉ!"", ""error"");
                        $(""#txtPhiShip"").text(commasThousands(0))
                        $('#textTotalMoney').text(commasThousands(total));
                        $('#pTotalMoney').val(total);
");
            WriteLiteral(@"                        $('#cShippingFee').val(0);
                    }
                }
            })
        });

        $(""#selectWards"").change(function () {
            let district = $(""#selectDistrict"").val();
            let ward = $(""#selectWards"").val();
            ShippingFee(district, ward)
        })

        $('input.quantity').keyup(function () {
            let regex = /^[0-9]+$/;
            if (!regex.test($(this).val()))
                $(this).val($(this).val().replace(/[^0-9.]/g, """"));
        });


        $(""#selectVoucher"").change(function () {
            $(""#DiscountCode"").val('')
            let _id = $(""#selectVoucher"").val();
            $.ajax({
                url: ""/Product/GetVoucher?id="" + _id,
                type: ""GET"",
                success: function (result) {
                    let totalProduct = parseFloat(document.querySelector('#txtTotalProduct').innerText.replace(/,/g, ''));
                    let discount = 0;
                  ");
            WriteLiteral(@"  var total = 0;
                    if (result != null) {
                        if (result.discountForm == ""%"") {
                            discount = Math.round(TinhPhanTram(totalProduct, result.discountRate))
                            if (discount > result.maximumDiscount)
                                discount = result.maximumDiscount
                        }
                        else {
                            discount = result.discountRate
                        }
                        $(""#txtGiamGia"").text(commasThousands(discount))
                        total = totalProduct - discount + parseFloat(document.querySelector('#txtPhiShip').innerText.replace(/,/g, ''));
                    
                         swal(""Áp dụng thành công mã giảm giá: "" + result.name, ""Bạn được giảm: "" + commasThousands(discount) + "" đ"", ""success"");
                    }
                    else {
                        swal(""Thông báo!"", ""Mã giảm giá không được áp dụng!"", ""error"");
  ");
            WriteLiteral(@"                      $(""#txtGiamGia"").text(0)
                        $(""#txtDiscountForm"").text(""đ"")
                        total = totalProduct + parseFloat(document.querySelector('#txtPhiShip').innerText.replace(/,/g, ''));
                    }

                    if (total < 0) {
                        total = 0;
                    }

                
                    $('#textTotalMoney').text(commasThousands(total));
                    $('#pTotalMoney').val(total);
                    $('#cGiamGia').val(discount);
                }
            })
        });



        $('[data-quantity=""plus""]').click(function (e) {
            e.preventDefault();
            fieldName = $(this).attr('data-field');
            var currentVal = parseInt($('input[name=' + fieldName + ']').val());
            if (!isNaN(currentVal)) {
                $('input[name=' + fieldName + ']').val(currentVal + 1);
            } else {
                $('input[name=' + fieldName + ']').val(0);
  ");
            WriteLiteral(@"          }
            sumTotal();
        });
        $('[data-quantity=""minus""]').click(function (e) {
            e.preventDefault();
            fieldName = $(this).attr('data-field');
            var currentVal = parseInt($('input[name=' + fieldName + ']').val());
            if (!isNaN(currentVal) && currentVal > 0) {
                $('input[name=' + fieldName + ']').val(currentVal - 1);
            } else {
                $('input[name=' + fieldName + ']').val(0);
            }
            sumTotal();
        });

        $("".quantity"").change(function(){
            sumTotal();
        });

        $('.cl-class > button').click(function () {
            $('.cl-class > button').css('background-color', 'white');
            $(this).css('background-color', '#00CCCC');
            $('#cColor').val($(this).val());
            getQuantityInstock();
        });

        $('.si-class > button').click(function () {
            $('.si-class > button').css('background-color', 'white");
            WriteLiteral(@"');
            $(this).css('background-color', '#00CCCC');
            $('#cSize').val($(this).val());
            getQuantityInstock();
        });

        var er = document.getElementById('error')
        if (er != null) {
            if ($('#error').text() == 'Failed')
                swal(""Không thành công"", ""Thao tác thất bại, vui lòng thực hiện lại"", ""error"");
            else
                swal(""Thành công"", ""Thao tác thành công"", ""success"");
        }

        var messerror = document.getElementById('messerror')
        if (messerror != null) {
            swal(""Không thành công"", messerror, ""error"");
        }
    });



    function CheckDiscountCode() {
        $(""#selectVoucher"").val(0)

        let _discountCode = $(""#DiscountCode"").val();
        $.ajax({
            url: ""/Product/GetVoucher?discountCode="" + _discountCode,
            type: ""GET"",
            success: function (result) {
                let totalProduct = parseFloat(document.querySelector('#txt");
            WriteLiteral(@"TotalProduct').innerText.replace(/,/g, ''));
                let discount = 0;
                var total = 0;
                if (result != null) {
                    if (result.discountForm == ""%"") {
                        discount = Math.round(TinhPhanTram(totalProduct, result.discountRate))
                        if (discount > result.maximumDiscount)
                            discount = result.maximumDiscount
                    }
                    else {
                        discount = result.discountRate
                    }
                    $(""#txtGiamGia"").text(commasThousands(discount))
                    total = totalProduct - discount + parseFloat(document.querySelector('#txtPhiShip').innerText.replace(/,/g, ''));
                
                    swal(""Áp dụng thành công mã giảm giá: "" + _discountCode, ""Bạn được giảm: "" + commasThousands(discount) + "" đ "", ""success"");
                }
                else {
                    swal(""Thông báo!"", ""Mã giảm giá kh");
            WriteLiteral(@"ông được áp dụng!"", ""error"");
                    $(""#txtGiamGia"").text(0)
                    $(""#txtDiscountForm"").text(""đ"")
                    total = totalProduct + parseFloat(document.querySelector('#txtPhiShip').innerText.replace(/,/g, ''));
                }

                if (total < 0) {
                    total = 0;
                }

                
                $('#textTotalMoney').text(commasThousands(total));
                $('#pTotalMoney').val(total);
                $('#cGiamGia').val(discount);
            }
        })
    }

    function TinhPhanTram(tongtien, giamgia) {
        let thanhtien = tongtien - (tongtien * ((100 - giamgia) / 100))
        return thanhtien
    }

    function ConvertDate(time) {
        var date = new Date(time);
        var dateConvert = (((date.getDate() > 9) ? date.getDate() : ('0' + date.getDate())) + '/' + ((date.getMonth() > 8) ? (date.getMonth() + 1) : ('0' + (date.getMonth() + 1))) + '/' + date.getFullYear())
        retu");
            WriteLiteral(@"rn dateConvert
    }

    function OpenDeliveryAddress() {
        $('#OrderModal').modal('hide');
    }
    e.preventDefault();
    

    function ShippingFee(district_id, ward_code) {
        $.ajax({
            url: ""/Product/ShippingFee?district_id="" + district_id + ""&ward_code="" + ward_code,
            type: ""GET"",
            success: function (result) {
                var total = 0;
                var total = parseFloat(document.querySelector('#txtTotalProduct').innerText.replace(/,/g, '')) + result - parseFloat(document.querySelector('#txtGiamGia').innerText.replace(/,/g, ''));
                if (total < 0) {
                    total = 0;
                }
                $(""#txtPhiShip"").text(commasThousands(result))
                $('#textTotalMoney').text(commasThousands(total));
                $('#pTotalMoney').val(total);
                $('#cShippingFee').val(result);
            }
        })
    }

    function GetDataVoucherById(totalMoneyOrder) {
        $.");
            WriteLiteral(@"ajax({
            url: ""/Product/GetVoucher?totalMoneyOrder="" + totalMoneyOrder,
            type: ""GET"",
            success: function (result) {
                var renderData = ""<option></option>"";
                $.each(result, function (value) {
                    var date = result[value].expirationDate;
                    renderData += '<option value=""' + result[value].id + '"">' + result[value].name + '</option>';
                    renderData += '<option disabled style = ""font-style:italic"" > (Đơn Tối Thiểu ' + commasThousands(result[value].minimumOrder) + 'đ)' + '</option>'

                    if (result[value].discountForm == ""%"")
                        renderData += '<option disabled style = ""font-style:italic"" > (Giảm tối đa ' + commasThousands(result[value].maximumDiscount) + 'đ)' + '</option>'

                    renderData += '<option disabled style = ""font-style:italic"" > (HSD: ' + ConvertDate(date) + ')' + ' </option>'
                    renderData += '<option disabled st");
            WriteLiteral(@"yle=""font-style:italic""></option>'
                });
                $(""#selectVoucher"").html(renderData)
            }
        })
    }

    function GetDataVoucher(totalMoneyOrder) {
        $.ajax({
            url: ""/Product/GetVoucher?totalMoneyOrder="" + totalMoneyOrder,
            type: ""GET"",
            success: function (result) {
                var renderData = ""<option></option>"";
                $.each(result, function (value) {

                    var date = result[value].expirationDate;
                    renderData += '<option value=""' + result[value].id + '"">' + result[value].name + '</option>';
                    renderData += '<option disabled style = ""font-style:italic"" > (Đơn Tối Thiểu ' + commasThousands(result[value].minimumOrder) + 'đ)' + '</option>'

                    if (result[value].discountForm == ""%"")
                        renderData += '<option disabled style = ""font-style:italic"" > (Giảm tối đa ' + commasThousands(result[value].maximumDiscount) + '");
            WriteLiteral(@"đ)' + '</option>'

                    renderData += '<option disabled style = ""font-style:italic"" > (HSD: ' + ConvertDate(date) + ')' + ' </option>'
                    renderData += '<option disabled style=""font-style:italic""></option>'
                });
                $(""#selectVoucher"").html(renderData)
            }
        })
    }

    function getQuantityInstock() {
        $.ajax({
            data: {
                cColorId: $('#cColor').val(),
                cSizeId: $('#cSize').val(),
                cProductId: $('#cProductId').val()
            },
            contentType: 'application/json',
            dataType: 'json',
            url: '/Product/GetQuantityInstock',
            type: 'GET',
            success: function (result) {
                $('#mQuantityInstock').text(result);
            }
        });
    }

    function sumTotal() {
        let mQuantity = parseInt($('#quantity').val().replace(/,/g, '') || 0) || 0;
        let mPrice = parseFloat(");
#nullable restore
#line 921 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                           Write(price);

#line default
#line hidden
#nullable disable
            WriteLiteral(@") || 0;
        $('#cQuantity').val(mQuantity);
        $('#cPrice').val(mPrice);
        $('#cTotalMoney').val(mQuantity * mPrice);
        $('#pTotalMoney').val(mQuantity * mPrice);
        $('#totalMoney').text(commasThousands(mQuantity * mPrice) + ' đ');
        $('#txtTotalProduct').text(commasThousands($('#pTotalMoney').val()));
    }

    function commasThousands(nStr) {
        nStr += '';
        nStr = nStr.replace(/,/g, '');
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }
        return x1 + x2;
    }

    function checkValidateData() {
        if ($('#cQuantity').val() == '' || $('#cQuantity').val() == '0') {
            sweetAlert(""Thông báo"", ""Thông tin số lượng sản phẩm không được để trống"", ""error"");
            return false;
        }
        if (parseInt($('#cQuantity').val() || 0) > parseInt($(");
            WriteLiteral(@"'#mQuantityInstock').text() || 0)) {
            sweetAlert(""Thông báo"", ""Thông tin số lượng không được lớn hơn số lượng còn lại của sản phẩm"", ""error"");
            return false;
        }
        if ($('#cSize').val() == '') {
            sweetAlert("""", ""Vui lòng chọn kích cỡ"", ""error"");
            return false;
        }
        if ($('#cColor').val() == '') {
            sweetAlert("""", ""Vui lòng chọn màu sắc"", ""error"");
            return false;
        }

        return true;
    }

    function validatePhoneNumber(code) {
        var regex = /(84|0[3|5|7|8|9])+([0-9]{8})\b/;
        return regex.test(code);
    }
    function checkOrderData() {
        if ($('#ShippingFullName').val() == '') {
            sweetAlert(""Thông báo"", ""Thông tin Họ tên người mua hàng không được để trống"", ""error"");
            return false;
        }
        if ($('#ShippingPhone').val() == '') {
            sweetAlert("""", ""Thông tin Số điện thoại không được để trống"", ""error"");
            return ");
            WriteLiteral(@"false;
        }
        if (!validatePhoneNumber($('#ShippingPhone').val())) {
            sweetAlert(""Thông báo"", ""Thông tin Số điện thoại không đúng định dạng"", ""error"");
            return false;
        }
        if ($('#selectProvince').val() == '') {
            sweetAlert("""", ""Thông tin thành phố không được để trống"", ""error"");
            return false;
        }
        if ($('#selectDistrict').val() == '') {
            sweetAlert("""", ""Thông tin huyện không được để trống"", ""error"");
            return false;
        }
        if ($('#selectWards').val() == '') {
            sweetAlert("""", ""Thông tin phường xã không được để trống"", ""error"");
            return false;
        }
        if ($('#ShippingEmail').val() == '') {
            sweetAlert("""", ""Thông tin Email không được để trống"", ""error"");
            return false;
        }
        if ($('#PaymentType').val() == '') {
            sweetAlert("""", ""Thông tin thanh toán không được để trống"", ""error"");
            return f");
            WriteLiteral(@"alse;
        }
        if ($('#ShippingAddress').val() == '') {
            sweetAlert("""", ""Thông tin địa chỉ không được để trống"", ""error"");
            return false;
        }
        return true;
    }


    function changeImageProd(strImage) {
        $('#imgProd').attr('src', '/images/' + strImage);
        getQuantityInstock();
    }
    function changeLikeCount() {
        $.ajax({
            data: { cProductId: $('#cProductId').val() },
            contentType: 'application/json',
            dataType: 'json',
            url: '/Product/ReleaseHeart',
            type: 'GET',
            success: function (response) {
                location.reload();
            },
            error: function (xhr, ajaxOptions, thrownError) {
                location.reload();
            }
        });
    }

    function AddToCart() {
        if (checkValidateData()) {
            swal(""Bạn muốn thêm nhanh vào giỏ hàng của mình?"", {
                title: 'Bạn muốn thêm nhanh vào ");
            WriteLiteral(@"giỏ hàng của mình?',
                icon: 'info',
                buttons: [""Không, tôi cần xem lại"", ""Có, tôi đồng ý""],
            }).then(function (isConfirm) {
                if (isConfirm) {
                    var _total_money = $('#cTotalMoney').val();
                    var _color = $('#cColor').val();
                    var _size = $('#cSize').val();
                    var _quantity = $('#cQuantity').val();
                    var _price = $('#cPrice').val();
                    var _product_id = $('#cProductId').val();
                    var _description = $('#cDescription').val();
                    document.location = ""/Product/AddToCart?cTotalMoney="" + _total_money + ""&cColor="" + _color + ""&cSize="" + _size + ""&cQuantity="" + _quantity + ""&cPrice="" + _price
                        + ""&cProductId="" + _product_id + ""&cDescription="" + _description;
                } else {
                    swal(""Đã hủy"", ""Bạn đã không lưu những thay đổi này!"", ""error"");
                }
   ");
            WriteLiteral(@"         });
        }
    }

    function BuyNow() {
        if (checkValidateData()) {
            var products = [];
            var _product = {};
            _product.color = parseInt($('#cColor').val());
            _product.size = parseInt($('#cSize').val());
            _product.price = parseFloat($('#cPrice').val());
            _product.quantity = parseInt($('#cQuantity').val());
            _product.totalMoneyItem = parseFloat($('#cTotalMoney').val());
            _product.productId = $('#cProductId').val();
            products.push(_product);

            let total = $('#cTotalMoney').val();

            if(");
#nullable restore
#line 1067 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
          Write(checkByNow);

#line default
#line hidden
#nullable disable
            WriteLiteral(@" == 1)
            {
                DataAddressCustomer();  
            }
            
            GetDataVoucher(total);

            $('#textTotalMoney').text(commasThousands(total));
            $('#pTotalMoney').val(total);

            $.ajax({
                data: {
                    products: JSON.stringify(products)
                },
                contentType: 'application/json',
                dataType: 'json',
                url: '/Product/Order',
                type: 'GET'
            });

            //Lấy thông tin người dùng
            $.ajax({
                contentType: 'application/json',
                dataType: 'json',
                url: '/Product/GetCustomerInfo',
                type: 'GET',
                success: function (result) {
                    $(""#ShippingFullName"").val(result.name);
                    $(""#ShippingPhone"").val(result.phoneNumber);
                    $(""#ShippingEmail"").val(result.email);
                }
       ");
            WriteLiteral("     });\r\n            $(\'#OrderModal\').modal(\'show\');\r\n        }\r\n    }\r\n\r\n    $(\'#btnCloseModal\').click(function () {\r\n        $(\'#OrderModal\').modal(\'hide\');\r\n    });\r\n\r\n\r\n    function SCRate() {\r\n        for (var i = 1; i <= ");
#nullable restore
#line 1109 "C:\Users\huy.luu\Downloads\GProject111\GProject\GProject.WebApplication\GProject.WebApplication\Views\Product\ProductDetail.cshtml"
                        Write(totalRating);

#line default
#line hidden
#nullable disable
            WriteLiteral("; i++) {\r\n            $(\"#sRate\" + i).attr(\'class\', \'starGlowN\');\r\n        }\r\n    }\r\n\r\n    $(function () {\r\n        SCRate();\r\n    });\r\n</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<Tuple<GProject.Data.DomainClass.Product, List<GProject.Data.DomainClass.ProductVariation>,
GProject.Data.DomainClass.Brand, EvaluateCommentDTO, decimal, int, Customer>> Html { get; private set; }
    }
}
#pragma warning restore 1591
